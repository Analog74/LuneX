{
  "Attributes": {},
  "Capabilities": "<FAILED: Unsupported variant type: Discriminant(37) (property: Capabilities, class: ModuleScript, instance: WindLines)>",
  "HistoryId": "<FAILED: Unsupported variant type: Discriminant(35) (property: HistoryId, class: ModuleScript, instance: WindLines)>",
  "LinkedSource": "<FAILED: Unsupported variant type: Discriminant(8) (property: LinkedSource, class: ModuleScript, instance: WindLines)>",
  "Sandboxed": false,
  "ScriptGuid": "{7A058714-C06A-4D66-946F-D0ADF6E14200}",
  "Source": "local RunService = game:GetService(\"RunService\")\nlocal Terrain = workspace:FindFirstChildOfClass(\"Terrain\")\n\nlocal EMPTY_TABLE = {}\nlocal OFFSET = Vector3.new(0,0.1,0)\n\nlocal module = {}\n\nmodule.UpdateQueue = table.create(10)\n\nfunction module:Init(Settings)\n\t-- Set defaults\n\tmodule.Lifetime = Settings.Lifetime or 3\n\tmodule.Direction = Settings.Direction or Vector3.new(1,0,0)\n\tmodule.Speed = Settings.Speed or 6\n\t\n\t-- Clear any old stuff\n\tif module.UpdateConnection then\n\t\tmodule.UpdateConnection:Disconnect()\n\t\tmodule.UpdateConnection = nil\n\tend\n\t\n\tfor _, WindLine in ipairs(module.UpdateQueue) do\n\t\tWindLine.Attachment0:Destroy()\n\t\tWindLine.Attachment1:Destroy()\n\t\tWindLine.Trail:Destroy()\n\tend\n\ttable.clear(module.UpdateQueue)\n\t\n\tmodule.LastSpawned = os.clock()\n\tlocal SpawnRate = 1/(Settings.SpawnRate or 8)\n\t\n\t-- Setup logic loop\n\tmodule.UpdateConnection = RunService.Heartbeat:Connect(function()\n\t\tlocal Clock = os.clock()\n\t\t\n\t\t-- Spawn handler\n\t\tif Clock-module.LastSpawned > SpawnRate then\n\t\t\tmodule:Create()\n\t\t\tmodule.LastSpawned = Clock\n\t\tend\n\t\t\n\t\t-- Update queue handler\n\t\tdebug.profilebegin(\"Wind Lines\")\n\t\tfor i, WindLine in ipairs(module.UpdateQueue) do\n\t\t\t\n\t\t\tlocal AliveTime = Clock-WindLine.StartClock\n\t\t\tif AliveTime >= WindLine.Lifetime then\n\t\t\t\t-- Destroy the objects\n\t\t\t\tWindLine.Attachment0:Destroy()\n\t\t\t\tWindLine.Attachment1:Destroy()\n\t\t\t\tWindLine.Trail:Destroy()\n\t\t\t\t\n\t\t\t\t-- unordered remove at this index\n\t\t\t\tlocal Length = #module.UpdateQueue\n\t\t\t\tmodule.UpdateQueue[i] = module.UpdateQueue[Length]\n\t\t\t\tmodule.UpdateQueue[Length] = nil\n\t\t\t\t\n\t\t\t\tcontinue\n\t\t\tend\n\t\t\t\n\t\t\tWindLine.Trail.MaxLength = 20 - (20*(AliveTime/WindLine.Lifetime))\n\t\t\t\n\t\t\tlocal SeededClock = (Clock+WindLine.Seed)*(WindLine.Speed*0.2)\n\t\t\tlocal StartPos = WindLine.Position\n\t\t\tWindLine.Attachment0.WorldPosition = (\n\t\t\t\tCFrame.new(StartPos, StartPos+WindLine.Direction) * CFrame.new(0,0,WindLine.Speed * -AliveTime)\n\t\t\t).Position + Vector3.new(math.sin(SeededClock)*0.5,math.sin(SeededClock)*0.8,math.sin(SeededClock)*0.5)\n\t\t\t\n\t\t\tWindLine.Attachment1.WorldPosition = WindLine.Attachment0.WorldPosition + OFFSET\n\t\t\t\n\t\tend\n\t\tdebug.profileend()\n\tend)\n\n\nend\n\nfunction module:Cleanup()\n\t\n\tif module.UpdateConnection then\n\t\tmodule.UpdateConnection:Disconnect()\n\t\tmodule.UpdateConnection = nil\n\tend\n\n\tfor _, WindLine in ipairs(module.UpdateQueue) do\n\t\tWindLine.Attachment0:Destroy()\n\t\tWindLine.Attachment1:Destroy()\n\t\tWindLine.Trail:Destroy()\n\tend\n\ttable.clear(module.UpdateQueue)\n\t\nend\n\nfunction module:Create(Settings)\n\tdebug.profilebegin(\"Add Wind Line\")\n\t\n\tSettings = Settings or EMPTY_TABLE\n\n\tlocal Lifetime = Settings.Lifetime or module.Lifetime\n\tlocal Position = Settings.Position or (workspace.CurrentCamera.CFrame*CFrame.Angles(math.rad(math.random(-30,70)),math.rad(math.random(-80,80)),0))*CFrame.new(0,0,math.random(200,600)*-0.1).Position\n\tlocal Direction = Settings.Direction or module.Direction\n\tlocal Speed = Settings.Speed or module.Speed\n\tif Speed <= 0 then return end\n\n\tlocal Attachment0 = Instance.new(\"Attachment\")\n\tlocal Attachment1 = Instance.new(\"Attachment\")\n\t\n\tlocal Trail = Instance.new(\"Trail\")\n\tTrail.Attachment0 = Attachment0\n\tTrail.Attachment1 = Attachment1\n\tTrail.WidthScale = NumberSequence.new({\n\t\tNumberSequenceKeypoint.new(0,0.3),\n\t\tNumberSequenceKeypoint.new(0.2,1),\n\t\tNumberSequenceKeypoint.new(0.8,1),\n\t\tNumberSequenceKeypoint.new(1, 0),\n\t})\n\tTrail.Transparency = NumberSequence.new({NumberSequenceKeypoint.new(0, 0.5), NumberSequenceKeypoint.new(1, 0)})\n\tTrail.FaceCamera = true\n\tTrail.Parent = Attachment0\n\n\tAttachment0.WorldPosition = Position\n\tAttachment1.WorldPosition = Position+OFFSET\n\t\n\tlocal WindLine = {\n\t\tAttachment0 = Attachment0;\n\t\tAttachment1 = Attachment1;\n\t\tTrail = Trail;\n\t\tLifetime = Lifetime+(math.random(-10,10)*0.1);\n\t\tPosition = Position;\n\t\tDirection = Direction;\n\t\tSpeed = Speed+(math.random(-10,10)*0.1);\n\t\tStartClock = os.clock();\n\t\tSeed = math.random(1,1000)*0.1;\n\t}\n\t\n\tmodule.UpdateQueue[#module.UpdateQueue+1] = WindLine\n\n\tAttachment0.Parent = Terrain\n\tAttachment1.Parent = Terrain\n\t\n\tdebug.profileend()\nend\n\nreturn module\n",
  "SourceAssetId": -1,
  "Tags": [],
  "UniqueId": "<FAILED: Unsupported variant type: Discriminant(35) (property: UniqueId, class: ModuleScript, instance: WindLines)>"
}